---
interface Props {
  title: string;
  description: string;
  price: string;
  href?: string | null;
  gumroadUrl?: string | null;
  isFree?: boolean;
  icon?: string;
  emailGated?: boolean;
}

const { title, description, price, href, gumroadUrl, isFree = false, icon, emailGated = false } = Astro.props;

const linkHref = href || gumroadUrl || '#';
const isExternal = gumroadUrl && !href;
---

<article class:list={['glass-card h-full flex flex-col p-6', isFree && 'border-accent-500/30']}>
  {icon && <div class="text-4xl mb-4">{icon}</div>}

  <h3 class="text-lg font-bold text-white mb-2">{title}</h3>

  <p class="text-gray-400 text-sm mb-4 flex-grow">{description}</p>

  <div class="mt-auto">
    <div class="flex items-center justify-between mb-4">
      <span class:list={['font-bold', isFree ? 'text-gradient text-xl' : 'text-white text-lg']}>
        {price}
      </span>
      {isFree && emailGated && (
        <span class="badge badge-accent">Email Required</span>
      )}
    </div>

    <a
      href={linkHref}
      class:list={[
        'btn w-full',
        isFree ? 'btn-primary' : 'btn-secondary'
      ]}
      target={isExternal ? '_blank' : undefined}
      rel={isExternal ? 'noopener noreferrer' : undefined}
    >
      {isFree ? 'Get Free Guide' : 'Get Template'}
    </a>
  </div>
</article>
